<!DOCTYPE html>
<html>

<head>

<!-- Load the Content Experiment JavaScript API client for the experiment -->
<script src="//www.google-analytics.com/cx/api.js?experiment=XDGiu6DySf-GzuI84u1orw"></script>

<script>
// Ask Google Analytics which variation to show the user.
var chosenVariation = cxApi.chooseVariation();
console.log(chosenVariation);
</script>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Here are my dotfiles</title>
<meta name="viewport" content="width=device-width">
<meta name="description" content="I&#x27;ve recently been uploading a lot of my old projects to GitHub. There is only one left: my dotfiles. You can view them on GitHub. I wanted to upload...">
<link rel="canonical" href="https://davidxmoody.com/here-are-my-dotfiles/">
<link rel="stylesheet" href="/css/main-a224372f29b28b5918ba7d3053ef3cc9.css">
<meta name="wot-verification" content="fdff4a26070b9df2fd1a" />
</head>

<body>

<div class="wrapper">
<header class="site-header">
<h1><a href="/">David Moody</a></h1>
<p>A blog about programming</p>
</header>

<div class="content">
<article>
<header>
<h1>Here are my dotfiles</h1>
<p><em>Nov 5, 2014</em></p>
</header>
<div>
<p>I&#39;ve recently been uploading a lot of my old projects to GitHub. There is only one left: <strong>my dotfiles</strong>.</p>
<!--more-->
<p>You can <a href="https://github.com/davidxmoody/dotfiles">view them on GitHub</a>. I wanted to upload them because I think there are a few interesting fragments in there. Someone might find something they need. It also makes it easier for me to clone them from another machine, should the need ever arise. </p>
<p>There are about 200 commits, spanning three years. I don&#39;t pretend to be an expert in these things but I still feel my dotfiles reflect a lot of experience over that time.</p>
<p>It&#39;s slightly messy at the moment. I would like to organise them better someday. I recently found <a href="http://dotfiles.github.io/">GitHub does dotfiles</a>. It has some very interesting links to other dotfile repositories and frameworks. </p>
<p>In the rest of this post, I am going to highlight a few of the most interesting things in my dotfiles.</p>
<h2 id="-mkalias-"><code>mkalias</code></h2>
<p>I have <a href="/permanent-bash-aliases/">already written a blog post on this function</a> which you should check out. The gist of it is that it takes too long to open up your <code>.bash_aliases</code> file just to create a new alias. My simple Bash function works just like the normal <code>alias</code> command except it makes the alias &quot;permanent&quot; by placing it into your aliases file. </p>
<pre><code class="lang-bash"><span class="hljs-function"><span class="hljs-title">mkalias</span></span>() {
  <span class="hljs-comment"># Flatten arguments into one string</span>
  <span class="hljs-built_in">local</span> full_string=$*

  <span class="hljs-comment"># Extract the first and last parts</span>
  <span class="hljs-built_in">local</span> <span class="hljs-built_in">alias</span>_name=<span class="hljs-variable">${full_string%%=*}</span>
  <span class="hljs-built_in">local</span> <span class="hljs-built_in">alias</span>_result=<span class="hljs-variable">${full_string#*=}</span>

  <span class="hljs-comment"># Construct the new command</span>
  <span class="hljs-built_in">local</span> <span class="hljs-built_in">alias</span>_<span class="hljs-built_in">command</span>=<span class="hljs-string">"alias <span class="hljs-variable">$alias_name</span>='<span class="hljs-variable">$alias_result</span>'"</span>

  <span class="hljs-comment"># Execute the command, if successful then print </span>
  <span class="hljs-comment"># out the alias and add it to ~/.bash_aliases</span>
  <span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-variable">$alias_command</span>"</span> &amp;&amp; \
  <span class="hljs-built_in">alias</span> <span class="hljs-string">"<span class="hljs-variable">$alias_name</span>"</span> | tee <span class="hljs-operator">-a</span> <span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.bash_aliases"</span>
}
</code></pre>
<h2 id="jpeg-metadata-stripping-and-resizing">JPEG metadata stripping and resizing</h2>
<p>When you take a photo, a lot of extra data is created. Stuff like the date, camera model, exposure and whatnot. However, when you are creating a website, there is no point downloading all that data along with the image. It can often take up around 20KB of extra space. </p>
<p>I use this handy <code>stripjpg</code> alias to strip out all Exif data. I also use <code>convert</code> to downscale images to 800px wide (for this blog). It&#39;s not a perfect responsive image setup but it works for now. </p>
<pre><code class="lang-bash"><span class="hljs-built_in">alias</span> stripjpg=<span class="hljs-string">'exiftool -all= '</span>
<span class="hljs-function"><span class="hljs-title">resize800</span></span>() {
  stripjpg <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span> &amp;&amp; \
  <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>; <span class="hljs-keyword">do</span>
    convert <span class="hljs-string">"<span class="hljs-variable">$f</span>"</span> -resize <span class="hljs-number">800</span>x <span class="hljs-string">"<span class="hljs-variable">$f</span>"</span>
  <span class="hljs-keyword">done</span>
}
</code></pre>
<h2 id="word-frequency-script">Word frequency script</h2>
<p>A little something I created when I wanted to find the number of occurrences of common words in a large corpus of text split across multiple files. </p>
<pre><code class="lang-python"><span class="hljs-comment">#!/usr/bin/env python3</span>

<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter
<span class="hljs-keyword">import</span> fileinput

word_tallies = Counter()

<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fileinput.input():
    word_tallies.update(line.split())

<span class="hljs-keyword">for</span> word, count <span class="hljs-keyword">in</span> word_tallies.most_common(<span class="hljs-number">2000</span>):
    print(count, word)
</code></pre>
<h2 id="vim-writing-tricks">Vim writing tricks</h2>
<p>Again, I have already written about <a href="/vim-auto-capitalisation/">Vim auto-capitalisation</a> and <a href="/better-vim-abbreviations/">better Vim abbreviations</a>. </p>
<p>Two months later, I still love them both. They both save me several minutes daily. Not having to press the shift key so much also makes my little fingers very happy. </p>
<h2 id="-home-setup-script"><code>home-setup</code> script</h2>
<p>I&#39;ve gone through some very complex and messy dotfile setups in the last three years. I finally settled upon a very simple script. It simply symlinks everything in <code>dotfiles</code> to my home directory. </p>
<p>It also appends a dot to the names (because I don&#39;t like hidden files in a project directory specifically meant for dotfiles). Additionally, it backs up anything that was already in my home directory with the same name (but avoids creating backed up duplicate links).</p>
<pre><code class="lang-bash"><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> dotfiles/*; <span class="hljs-keyword">do</span>
    target=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.<span class="hljs-variable">${file#dotfiles/}</span>"</span>
    target_canon=$(readlink <span class="hljs-operator">-f</span> <span class="hljs-string">"<span class="hljs-variable">$target</span>"</span>)
    file_canon=$(readlink <span class="hljs-operator">-f</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
    [ <span class="hljs-string">"<span class="hljs-variable">$target_canon</span>"</span> = <span class="hljs-string">"<span class="hljs-variable">$file_canon</span>"</span> ] &amp;&amp; <span class="hljs-built_in">continue</span>
    ln -sbv <span class="hljs-string">"<span class="hljs-variable">$file_canon</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$target</span>"</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h2 id="tons-of-short-aliases">Tons of short aliases</h2>
<p>There are too many to go over and most aren&#39;t that novel. However, they all represent small time and effort savings which quickly add up. Here is a small sample.</p>
<pre><code class="lang-bash"><span class="hljs-built_in">alias</span>  ls=<span class="hljs-string">'ls -F --group-directories-first --color=auto'</span>

<span class="hljs-function"><span class="hljs-title">greppy</span></span>() { grep -n <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> *.py; }
<span class="hljs-function"><span class="hljs-title">grepc</span></span>() { grep -n <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> *.coffee; }

<span class="hljs-built_in">alias</span> up=<span class="hljs-string">'cd ..'</span>
<span class="hljs-built_in">alias</span> cdt=<span class="hljs-string">'cd ~/tmp'</span>
<span class="hljs-function"><span class="hljs-title">cdl</span></span>() { <span class="hljs-built_in">cd</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span> &amp;&amp; l; }
<span class="hljs-function"><span class="hljs-title">mkcd</span></span>() { mkdir <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span> &amp;&amp; <span class="hljs-built_in">cd</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>; }

<span class="hljs-built_in">alias</span> vimrc=<span class="hljs-string">'vim ~/.vimrc'</span>
<span class="hljs-built_in">alias</span> vba=<span class="hljs-string">'vim ~/.bash_aliases'</span>

<span class="hljs-built_in">alias</span> gs=<span class="hljs-string">'git status'</span>
<span class="hljs-built_in">alias</span> gc=<span class="hljs-string">'git commit'</span>
<span class="hljs-built_in">alias</span> gl=<span class="hljs-string">'git log'</span>

<span class="hljs-built_in">alias</span> jeks=<span class="hljs-string">'jekyll server --watch --port 4000 --drafts'</span>
<span class="hljs-built_in">alias</span> simplehttp=<span class="hljs-string">'python -m SimpleHTTPServer'</span>

<span class="hljs-built_in">alias</span> py=<span class="hljs-string">'python3'</span>
<span class="hljs-built_in">alias</span> pyi=<span class="hljs-string">'python3 -i'</span>

<span class="hljs-built_in">alias</span> op=<span class="hljs-string">'xdg-open'</span>
</code></pre>
</div>
</article>
</div>

<div class="push"></div>
</div>

<footer class="site-footer">
<br>
<p>
<a href="/feed.xml">RSS</a> |
<a href="https://github.com/davidxmoody">GitHub</a> |
<a href="mailto:david@davidxmoody.com">Email</a>
</p>
<p>
This blog is available under a
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        Creative Commons License
      </a>
</p>
</footer>

<script>
(function(i, s, o, g, r, a, m) {
				i['GoogleAnalyticsObject'] = r;
				i[r] = i[r] || function() {
								(i[r].q = i[r].q || []).push(arguments)
				}, i[r].l = 1 * new Date();
				a = s.createElement(o),
								m = s.getElementsByTagName(o)[0];
				a.async = 1;
				a.src = g;
				m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-54505873-1', 'auto');
ga('send', 'pageview');
</script>

</body>

</html>