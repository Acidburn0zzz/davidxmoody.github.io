<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Permanent Bash aliases</title><meta name="viewport" content="width=device-width"><meta name="description" content="A blog about programming"><link rel="canonical" href="http://davidxmoody.com/permanent-bash-aliases/"><link rel="stylesheet" href="/css/main.css"><meta name="wot-verification" content="fdff4a26070b9df2fd1a"/></head><body><div class="wrapper"> <header class="site-header"><h1><a href="/">David Moody</a></h1><p>A blog about programming</p> </header><div class="content"> <article> <header><h1>Permanent Bash aliases</h1><p><em>Sep 3, 2014</em></p> </header><p>This post will introduce a handy little Bash tip. I created it over a year ago but many other people have already done similar things.</p><p>Bash aliases are incredibly convenient. If, for some reason, you don’t already use them then you should <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-useful-bash-aliases-and-functions">read this tutorial</a>.</p><p>Anyway, on to the function:</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">mkalias<span class="o">()</span> <span class="o">{</span>
  <span class="c"># Flatten arguments into one string</span>
  <span class="nb">local </span><span class="nv">full_string</span><span class="o">=</span><span class="nv">$*</span>

  <span class="c"># Extract the first and last parts</span>
  <span class="nb">local </span><span class="nv">alias_name</span><span class="o">=</span><span class="k">${</span><span class="nv">full_string</span><span class="p">%%=*</span><span class="k">}</span>
  <span class="nb">local </span><span class="nv">alias_result</span><span class="o">=</span><span class="k">${</span><span class="nv">full_string</span><span class="p">#*=</span><span class="k">}</span>

  <span class="c"># Construct the new command</span>
  <span class="nb">local </span><span class="nv">alias_command</span><span class="o">=</span><span class="s2">"alias $alias_name='$alias_result'"</span>

  <span class="c"># Execute the command, if successful then print </span>
  <span class="c"># out the alias and add it to ~/.bash_aliases</span>
  <span class="nb">eval</span> <span class="s2">"$alias_command"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
  <span class="nb">alias</span> <span class="s2">"$alias_name"</span> <span class="p">|</span> tee -a <span class="s2">"$HOME/.bash_aliases"</span>
<span class="o">}</span></code></pre></div><p>This allows you to create a “permanent” alias which gets added to your <code>~/.bash_aliases</code> file. It has a few other features. It prints out the alias (as interpreted by Bash) so you can check that nothing went wrong. It also allows you to omit quotes in many circumstances.</p><div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> mkalias <span class="nv">hello</span><span class="o">=</span><span class="nb">echo </span>hello world  <span class="c"># Quotes optional</span>
<span class="go">alias hello='echo hello world'</span>
<span class="gp">$</span> hello
<span class="go">hello world</span>

<span class="gp">$</span> <span class="nv">RC_DIR</span><span class="o">=</span>~/sync/dotfiles
<span class="gp">$</span> mkalias <span class="nv">cdrc</span><span class="o">=</span><span class="nb">cd</span> <span class="nv">$RC_DIR</span>  <span class="c"># Probably wrong</span>
<span class="go">alias cdrc='cd /home/david/sync/dotfiles'</span>
<span class="gp">$</span> mkalias <span class="nv">cdrc</span><span class="o">=</span><span class="s1">'cd $RC_DIR'</span>  <span class="c"># Should be quoted</span>
<span class="go">alias cdrc='cd $RC_DIR'</span>

<span class="gp">$</span> mkalias <span class="nv">lsl</span><span class="o">=</span><span class="s1">'ls | less'</span>  <span class="c"># Must be quoted</span>
<span class="go">alias lsl='ls | less'</span>

<span class="gp">$</span> bash  <span class="c"># Open new shell</span>
<span class="gp">$</span> hello  <span class="c"># Alias is remembered</span>
<span class="go">hello world</span></code></pre></div><p>The function can still fail if you use the wrong syntax (e.g. by putting whitespace around the <code>=</code> character). It would also be nice to find a way to share aliases between <em>already running Bash instances</em>.</p><p>One final tip, if you create an alias that “overwrites” another command, you can precede it with a backslash to run the original command.</p><div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> mkalias <span class="nv">ls</span><span class="o">=</span>ls -CF
<span class="go">alias ls='ls -CF'</span>
<span class="gp">$</span> ls  <span class="c"># Notice trailing slashes on directories</span>
<span class="go">CNAME       _config.yml  _ideas.md  _posts/  _site/  feed.xml  index.html</span>
<span class="go">README.md   _drafts/     _layouts/  _sass/   css/    images/</span>
<span class="gp">$</span> <span class="se">\l</span>s  <span class="c"># Regular ls behaviour</span>
<span class="go">CNAME      _config.yml  _ideas.md  _posts   _site  feed.xml  index.html</span>
<span class="go">README.md  _drafts      _layouts   _sass    css    images</span></code></pre></div></article></div><div class="push"></div></div><footer class="site-footer"><p> <br> <a href="http://feeds.feedburner.com/davidxmoody">RSS</a> | <a href="https://github.com/davidxmoody">GitHub</a> | <a href="mailto:david@davidxmoody.com">Email</a></p><p> This blog is available under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0 License</a></p> </footer><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-54505873-1","auto"),ga("send","pageview")</script></body></html>